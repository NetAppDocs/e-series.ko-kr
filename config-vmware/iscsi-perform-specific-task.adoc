---
permalink: config-vmware/iscsi-perform-specific-task.html 
sidebar: sidebar 
keywords: iscsi, express vmware configuration, software configuration, vmware host, E2800, E5700, EF300, EF600, E-Series, eseries 
summary: iSCSI 프로토콜의 경우 스위치를 구성하고 스토리지 측과 호스트 측에서 네트워킹을 구성합니다. 그런 다음 IP 네트워크 연결을 확인합니다. 
---
= iSCSI 관련 작업을 수행합니다
:allow-uri-read: 
:experimental: 
:icons: font
:imagesdir: ../media/


[role="lead"]
iSCSI 프로토콜의 경우 스위치를 구성하고 스토리지 측과 호스트 측에서 네트워킹을 구성합니다. 그런 다음 IP 네트워크 연결을 확인합니다.



== 1단계: 스위치 구성 - iSCSI, VMware

iSCSI에 대한 공급업체의 권장 사항에 따라 스위치를 구성합니다. 이러한 권장 사항에는 구성 지시문과 코드 업데이트가 모두 포함될 수 있습니다.

.필요한 것
* 고가용성을 위한 2개의 별도 네트워크. iSCSI 트래픽을 분리하여 네트워크 세그먼트를 구분해야 합니다.
* 하드웨어 흐름 제어 전송 및 수신 * 엔드 투 엔드 * 를 활성화했습니다.
* 우선 순위 흐름 제어를 비활성화했습니다.
* 필요한 경우 점보 프레임을 사용하도록 설정합니다.



NOTE: 컨트롤러의 스위치 포트에서는 포트 채널/LACP가 지원되지 않습니다. 호스트측 LACP는 권장되지 않습니다. 다중 경로가 동일한 이점 이상을 제공합니다.

.단계
스위치 공급업체의 설명서를 참조하십시오.



== 2단계: 네트워킹 구성 -- iSCSI VMware

데이터 저장소 요구 사항에 따라 여러 가지 방법으로 iSCSI 네트워크를 설정할 수 있습니다. 사용자 환경에 가장 적합한 구성을 선택하는 방법은 네트워크 관리자에게 문의하십시오.

.필요한 것
* 하드웨어 흐름 제어 전송 및 수신 * 엔드 투 엔드 * 를 활성화했습니다.
* 우선 순위 흐름 제어를 비활성화했습니다.
* 필요한 경우 점보 프레임을 사용하도록 설정합니다.
+
성능상의 이유로 IP SAN 내에서 점보 프레임을 사용하는 경우, 점보 프레임을 사용하도록 어레이, 스위치 및 호스트를 구성해야 합니다. 호스트와 스위치에서 점보 프레임을 활성화하는 방법에 대한 자세한 내용은 운영 체제 및 스위치 설명서를 참조하십시오. 어레이에서 점보 프레임을 활성화하려면 3단계의 단계를 완료하십시오.



.이 작업에 대해
iSCSI 네트워킹을 계획하는 동안 에 유의하십시오 https://configmax.vmware.com/home["VMware 구성 최대값"^] 가이드에서 지원되는 최대 iSCSI 스토리지 경로는 8입니다. 너무 많은 경로를 구성하지 않으려면 이 요구 사항을 고려해야 합니다.

기본적으로 VMware iSCSI 소프트웨어 이니시에이터는 iSCSI 포트 바인딩을 사용하지 않을 때 iSCSI 타겟당 단일 세션을 생성합니다.


NOTE: VMware iSCSI 포트 바인딩은 구성된 네트워크 세그먼트에서 액세스할 수 있는 모든 타겟 포트에 바인딩된 모든 VMkernel 포트를 강제로 로그인하는 기능입니다. iSCSI 대상에 대한 단일 네트워크 주소를 제공하는 어레이와 함께 사용됩니다. NetApp은 iSCSI 포트 바인딩을 사용하지 않을 것을 권장합니다. 자세한 내용은 를 참조하십시오 http://kb.vmware.com/["VMware 기술 자료"] ESX/ESXi에서 소프트웨어 iSCSI 포트 바인딩을 사용할 때의 고려 사항에 대한 문서를 참조하십시오. ESXi 호스트가 다른 공급업체의 스토리지에 연결된 경우 별도의 iSCSI vmkernel 포트를 사용하여 포트 바인딩과 충돌하지 않는 것이 좋습니다.

모범 사례를 위해서는 E-Series 스토리지 어레이에서 포트 바인딩을 사용하면 안 됩니다.

경로 다중화 구성이 양호한지 확인하려면 iSCSI 네트워크에 대해 여러 네트워크 세그먼트를 사용합니다. 한 네트워크 세그먼트의 각 어레이 컨트롤러에서 하나 이상의 호스트 측 포트와 하나 이상의 포트를 배치하고 다른 네트워크 세그먼트의 호스트 측 포트와 어레이 측 포트의 동일한 그룹을 배치합니다. 가능한 경우 여러 이더넷 스위치를 사용하여 추가적인 이중화를 제공합니다.

.단계
스위치 공급업체의 설명서를 참조하십시오.


NOTE: 많은 네트워크 스위치는 IP 오버헤드를 위해 9,000바이트 이상으로 구성해야 합니다. 자세한 내용은 스위치 설명서를 참조하십시오.



== 3단계: 스토리지 측 네트워킹 구성 -- iSCSI, VMware

SANtricity 시스템 관리자 GUI를 사용하여 어레이 측에서 iSCSI 네트워킹을 구성합니다.

.필요한 것
* 스토리지 어레이 컨트롤러 중 하나의 IP 주소 또는 도메인 이름입니다.
* System Manager GUI, 즉 RBAC(역할 기반 액세스 제어) 또는 LDAP 및 디렉토리 서비스에 대한 암호는 스토리지 어레이에 대한 적절한 보안 액세스를 위해 구성됩니다. 액세스 관리에 대한 자세한 내용은 SANtricity 시스템 관리자 온라인 도움말을 참조하십시오.


.이 작업에 대해
이 작업은 하드웨어 페이지에서 iSCSI 포트 구성에 액세스하는 방법을 설명합니다. 시스템 [설정 > iSCSI 포트 구성] 메뉴에서 구성에 액세스할 수도 있습니다.


NOTE: VMware 구성에서 스토리지 측 네트워킹을 설정하는 방법에 대한 자세한 내용은 다음 기술 보고서를 참조하십시오. https://www.netapp.com/us/media/tr-4789.pdf["E-Series SANtricity iSCSI와 ESXi 6.x 및 7.x의 통합에 대한 VMware 구성 가이드"].

.단계
. 브라우저에서 '+https://<DomainNameOrIPAddress>+` URL을 입력합니다
+
IPAddress는 스토리지 배열 컨트롤러 중 하나의 주소입니다.

+
구성되지 않은 어레이에서 SANtricity 시스템 관리자를 처음 열면 관리자 암호 설정 프롬프트가 나타납니다. 역할 기반 액세스 관리는 관리자, 지원, 보안 및 모니터링의 네 가지 로컬 역할을 구성합니다. 마지막 세 개의 역할에는 추측할 수 없는 임의의 암호가 있습니다. admin 역할의 암호를 설정한 후 admin 자격 증명을 사용하여 모든 암호를 변경할 수 있습니다. 4개의 로컬 사용자 역할에 대한 자세한 내용은 SANtricity 시스템 관리자 온라인 도움말을 참조하십시오.

. 관리자 암호 설정 및 암호 확인 필드에 관리자 역할에 대한 System Manager 암호를 입력한 다음 * 암호 설정 * 을 클릭합니다.
+
구성된 풀, 볼륨 그룹, 워크로드 또는 알림이 없는 경우 설정 마법사가 시작됩니다.

. 설정 마법사를 닫습니다.
+
나중에 마법사를 사용하여 추가 설정 작업을 완료합니다.

. 하드웨어 * 를 선택합니다.
. 그래픽에 드라이브가 표시되면 * 쉘프 뒷면 표시 * 를 클릭합니다.
+
그래픽이 변경되어 드라이브 대신 컨트롤러가 표시됩니다.

. 구성할 iSCSI 포트가 있는 컨트롤러를 클릭합니다.
+
컨트롤러의 상황에 맞는 메뉴가 나타납니다.

. iSCSI 포트 구성 * 을 선택합니다.
+
iSCSI 포트 구성 대화 상자가 열립니다.

. 드롭다운 목록에서 구성할 포트를 선택한 후 * 다음 * 을 클릭합니다.
. 구성 포트 설정을 선택한 후 * 다음 * 을 클릭합니다.
+
모든 포트 설정을 보려면 대화 상자 오른쪽에 있는 * 추가 포트 설정 표시 * 링크를 클릭합니다.

+
|===
| 포트 설정 | 설명 


 a| 
이더넷 포트 속도를 구성했습니다
 a| 
원하는 속도를 선택합니다. 드롭다운 목록에 표시되는 옵션은 네트워크에서 지원할 수 있는 최대 속도(예: 10Gbps)에 따라 달라집니다.


NOTE: 컨트롤러에서 옵션으로 제공되는 25GB iSCSI 호스트 인터페이스 카드는 속도를 자동 협상하지 않습니다. 각 포트의 속도를 10Gb 또는 25Gb로 설정해야 합니다. 모든 포트는 동일한 속도로 설정되어야 합니다.



 a| 
IPv4 사용/IPv6 사용
 a| 
IPv4 및 IPv6 네트워크에 대한 지원을 활성화하려면 하나 또는 두 옵션을 모두 선택하십시오.



 a| 
TCP 수신 대기 포트(* 추가 포트 설정 표시 * 를 클릭하여 사용 가능)
 a| 
필요한 경우 새 포트 번호를 입력합니다.

수신 대기 포트는 컨트롤러가 호스트 iSCSI 초기자의 iSCSI 로그인을 수신 대기하기 위해 사용하는 TCP 포트 번호입니다. 기본 수신 대기 포트는 3260입니다. 3260 또는 49152와 65535 사이의 값을 입력해야 합니다.



 a| 
MTU 크기(* 추가 포트 설정 표시 * 를 클릭하여 사용 가능)
 a| 
필요한 경우 MTU(Maximum Transmission Unit)에 대한 새 크기를 바이트 단위로 입력합니다.

기본 MTU(Maximum Transmission Unit) 크기는 프레임당 1,500바이트입니다. 1500에서 9000 사이의 값을 입력해야 합니다.



 a| 
ICMP Ping 응답을 활성화합니다
 a| 
ICMP(Internet Control Message Protocol)를 활성화하려면 이 옵션을 선택합니다. 네트워크로 연결된 컴퓨터의 운영 체제는 이 프로토콜을 사용하여 메시지를 전송합니다. 이러한 ICMP 메시지는 호스트에 연결할 수 있는지 여부와 해당 호스트와 패킷을 주고 받는 데 걸리는 시간을 결정합니다.

|===
+
IPv4 사용 * 을 선택한 경우 * 다음 * 을 클릭하면 IPv4 설정을 선택할 수 있는 대화 상자가 열립니다. IPv6 사용 * 을 선택한 경우 * 다음 * 을 클릭하면 IPv6 설정을 선택할 수 있는 대화 상자가 열립니다. 두 옵션을 모두 선택한 경우 IPv4 설정에 대한 대화 상자가 먼저 열리고 * 다음 * 을 클릭하면 IPv6 설정에 대한 대화 상자가 열립니다.

. IPv4 및/또는 IPv6 설정을 자동 또는 수동으로 구성합니다. 모든 포트 설정을 보려면 대화 상자 오른쪽에 있는 * 추가 설정 표시 * 링크를 클릭합니다.
+
|===
| 포트 설정 | 설명 


 a| 
자동으로 구성을 가져옵니다
 a| 
구성을 자동으로 가져오려면 이 옵션을 선택합니다.



 a| 
수동으로 정적 설정을 지정합니다
 a| 
이 옵션을 선택한 다음 필드에 정적 주소를 입력합니다. IPv4의 경우 네트워크 서브넷 마스크 및 게이트웨이를 포함합니다. IPv6의 경우 라우팅 가능한 IP 주소와 라우터 IP 주소를 포함합니다.

|===
. 마침 * 을 클릭합니다.
. System Manager를 닫습니다.




== 4단계: 호스트측 네트워킹 구성 -- iSCSI

호스트 측에서 iSCSI 네트워킹을 구성하면 VMware iSCSI 이니시에이터가 스토리지와 세션을 설정할 수 있습니다.

.이 작업에 대해
호스트 측에서 iSCSI 네트워킹을 구성하는 이 빠른 방법에서는 ESXi 호스트가 스토리지에 대한 4개의 중복 경로를 통해 iSCSI 트래픽을 전송할 수 있습니다.

이 작업을 완료하면 호스트는 VMkernel 포트 및 두 VMNIC를 모두 포함하는 단일 vSwitch로 구성됩니다.

VMware용 iSCSI 네트워킹 구성에 대한 자세한 내용은 를 참조하십시오 https://docs.vmware.com/en/VMware-vSphere/index.html["VMware vSphere 설명서"^] 를 참조하십시오.

.단계
. iSCSI 스토리지 트래픽을 전송하는 데 사용할 스위치를 구성합니다.
. 하드웨어 흐름 제어 전송 및 수신 * 엔드 투 엔드 * 를 활성화합니다.
. 우선순위 흐름 제어를 비활성화합니다.
. 어레이 측 iSCSI 구성을 완료합니다.
. iSCSI 트래픽에는 NIC 포트 2개를 사용합니다.
. vSphere Client 또는 vSphere 웹 클라이언트를 사용하여 호스트 측 구성을 수행합니다.
+
인터페이스는 기능마다 다르며 정확한 워크플로도 다릅니다.





== 5단계: IP 네트워크 연결 확인 -- iSCSI, VMware

ping 테스트를 사용하여 호스트와 어레이가 통신할 수 있는지 확인하여 IP(인터넷 프로토콜) 네트워크 연결을 확인합니다.

.단계
. 호스트에서 점보 프레임이 활성화되었는지 여부에 따라 다음 명령 중 하나를 실행합니다.
+
** 점보 프레임이 활성화되어 있지 않으면 다음 명령을 실행합니다.
+
[listing]
----
vmkping <iSCSI_target_IP_address\>
----
** 점보 프레임이 활성화된 경우 페이로드 크기가 8,972바이트인 ping 명령을 실행합니다. IP 및 ICMP 결합된 헤더는 28바이트로, 페이로드에 추가되면 9,000바이트입니다. s 스위치는 패킷 크기 비트를 설정합니다. d 스위치는 IPv4 패킷에 DF(조각화하지 않음) 비트를 설정합니다. 이러한 옵션을 사용하면 9,000바이트의 점보 프레임을 iSCSI 이니시에이터와 타겟 간에 성공적으로 전송할 수 있습니다.
+
[listing]
----
vmkping -s 8972 -d <iSCSI_target_IP_address\>
----
+
이 예에서 iSCSI 대상 IP 주소는 192.0.2.8 입니다.

+
[listing]
----
vmkping -s 8972 -d 192.0.2.8
Pinging 192.0.2.8 with 8972 bytes of data:
Reply from 192.0.2.8: bytes=8972 time=2ms TTL=64
Reply from 192.0.2.8: bytes=8972 time=2ms TTL=64
Reply from 192.0.2.8: bytes=8972 time=2ms TTL=64
Reply from 192.0.2.8: bytes=8972 time=2ms TTL=64
Ping statistics for 192.0.2.8:
  Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
  Minimum = 2ms, Maximum = 2ms, Average = 2ms
----


. 각 호스트의 이니시에이터 주소(iSCSI에 사용되는 호스트 이더넷 포트의 IP 주소)에서 각 컨트롤러의 iSCSI 포트로 'vmkping' 명령을 실행합니다. 구성에 있는 각 호스트 서버에서 이 작업을 수행하고 필요에 따라 IP 주소를 변경합니다.
+

NOTE: 명령이 실패하고 'S endto() failed(Message Too Long)' 메시지가 나타나면 호스트 서버, 스토리지 컨트롤러 및 스위치 포트의 이더넷 인터페이스에 대한 MTU 크기(점보 프레임 지원)를 확인합니다.

. iSCSI 구성 절차로 돌아가 대상 검색을 완료합니다.




== 6단계: 구성을 기록합니다

이 페이지의 PDF를 생성하여 인쇄한 다음 다음 워크시트를 사용하여 프로토콜별 스토리지 구성 정보를 기록할 수 있습니다. 프로비저닝 작업을 수행하려면 이 정보가 필요합니다.



=== 권장 구성

권장 구성은 2개의 이니시에이터 포트와 1개 이상의 VLAN이 있는 4개의 타겟 포트로 구성됩니다.

image::../media/50001_01_conf-vmw.gif[50001 구성 VMW]



=== 타겟 IQN입니다

|===
| 속성 표시기 번호 | 대상 포트 연결입니다 | IQN을 선택합니다 


 a| 
2
 a| 
대상 포트
 a| 

|===


=== 호스트 이름 매핑 중

|===
| 속성 표시기 번호 | 호스트 정보입니다 | 이름 및 유형 


 a| 
1
 a| 
호스트 이름 매핑 중
 a| 



 a| 
 a| 
호스트 OS 유형입니다
 a| 

|===